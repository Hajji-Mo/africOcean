import{j as e,an as A,au as Q,al as H,r as C,a3 as q,aA as K,L as W,aK as _,ao as V,aL as X}from"./index-CFcZ59wB.js";import{d as P}from"./catagories-B7f3g5Ps.js";import{a9 as D,e as y,O as Z,Z as $,X as J,P as E}from"./Select-DBX0L4bm.js";import{G as i,A as Y}from"./Grid-B3PNsH0E.js";import{T as o}from"./TextField-wcc40uSl.js";import{M as I}from"./index.esm-BIM1dmuT.js";import{e as ee,f as te,g as re,h as se}from"./productsApiSlice-yGYPNM6S.js";import{C as ae}from"./Container-BfLK-rLJ.js";import{L as ie}from"./ListItem-DFMug_rR.js";import{a as F,m as f,f as S,d as U,b as w,e as B,c as L}from"./TableRow-BfauFf0Q.js";import"./index.esm-DR0N4Ou-.js";import"./IconButton-C_Vej4sJ.js";function le({langData:t,lang:r,handleChange:l}){const h=P.find(a=>a.title[r]===t.category);t.category;const v=r==="en"?"fill by English":"fill by France";return P.map(a=>a.title),e.jsxs(D,{children:[e.jsx(y,{sx:{pb:"2rem",textAlign:"center"},children:v}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(o,{required:!0,fullWidth:!0,select:!0,id:`${r}_Category`,label:`${r} Category`,name:`${r}_Category`,value:t.category,autoComplete:"Category",onChange:a=>l(r,"category",a.target.value),children:P&&P.map((a,p)=>e.jsx(I,{value:a.title[r],children:a.title[r]},p))})}),e.jsx(i,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(o,{required:!0,fullWidth:!0,select:!0,value:t.subcatagory,name:`${r}_SubCategory`,label:`${r} SubCategory`,id:`${r}_SubCategory`,autoComplete:"SubCategory",onChange:a=>l(r,"subcategory",a.target.value),children:h&&h.subcatagory.map((a,p)=>e.jsx(I,{value:a[r],children:a[r]},p))})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(o,{required:!0,fullWidth:!0,type:"text",name:`${r}_Description`,label:`${r} Description`,autoComplete:`${r}_Description`,multiline:!0,value:t.description,onChange:a=>l(r,"description",a.target.value)})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsx(o,{required:!0,fullWidth:!0,multiline:!0,name:`${r}_summary`,label:`${r} Summary`,id:`${r}_summary`,autoComplete:`${r}_summary`,value:t.summary,onChange:a=>l(r,"summary",a.target.value)})})]})]})}const ne=()=>{const[t]=ee(),[r]=te(),l=A(Q);H();const[h,v]=C.useState(""),[a,p]=C.useState([]),[z,M]=C.useState("en"),[m,b]=C.useState({visible:!1,color:"",message:""}),[n,k]=C.useState({en:{description:"",category:"",subcategory:"",summary:""},fr:{description:"",category:"",subcategory:"",summary:""},name:"",rate:"",price:"",priceDiscount:"",coverImg:null,images:[],brand:"",tags:[],rank:"",country:"",creator:"",city:""}),G=(s,d,c)=>{k(T=>({...T,[s]:{...T[s],[d]:c}}))},x=(s,d)=>{k(c=>({...c,[s]:d}))},N=async s=>{s.preventDefault();const d=new FormData;if(!a>0)throw Error("not selected any image");a.forEach(c=>{d.append("images",c)}),d.append("coverImg",h),(!l&&!l.role==="manager"||!l&&!l.role==="admin")&&(b({...m,visible:!0,color:"error",message:"UnAutherized to upload product!!!"}),setTimeout(()=>{b({...m,visible:!1})},3e3)),n.creator=l._id;try{const c=await r(d),{coverImg:T,images:O}=c.data;n.coverImg=T,n.images=O;const pe=await t(n);b({...m,visible:!0,color:"success",message:"successfully uplaoded your product"}),setTimeout(()=>{b({...m,visible:!1})},3e3)}catch(c){throw console.log(c),b({...m,visible:!0,color:"error",message:c.data.message}),setTimeout(()=>b({...m,visible:!1}),5e3),Error(c)}};return e.jsxs(ae,{sx:{marginTop:"2.5rem"},children:[e.jsx(y,{variant:"h4",children:"Create Product"}),m.visible&&e.jsx(Y,{variant:"filled",severity:m.color,sx:{mt:3,position:"fixed"},children:m.message}),e.jsxs(q,{component:"form",Validate:!0,onSubmit:N,sx:{mt:3},children:[e.jsx(y,{sx:{pb:"2rem",pt:"2rem",textAlign:"center"},children:"Common Fields"}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:6,sm:4,lg:4,children:e.jsx(o,{autoComplete:"name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Name",value:n.name,onChange:s=>x("name",s.target.value)})}),e.jsx(i,{item:!0,xs:6,sm:4,lg:4,children:e.jsx(o,{autoComplete:"brand",name:"brand",required:!0,fullWidth:!0,id:"brand",label:"Brand",value:n.brand,onChange:s=>x("brand",s.target.value)})}),e.jsx(i,{item:!0,xs:6,sm:4,lg:4,children:e.jsx(o,{autoComplete:"Rate",name:"Rate",fullWidth:!0,id:"Rate",label:"Rating",type:"number",value:n.rate,onChange:s=>x("rate",s.target.value)})}),e.jsx(i,{item:!0,xs:6,sm:4,lg:4,children:e.jsx(o,{autoComplete:"price",name:"price",type:"number",required:!0,fullWidth:!0,id:"price",label:"Price",value:n.price,onChange:s=>x("price",s.target.value)})}),e.jsx(i,{item:!0,xs:6,sm:4,lg:4,children:e.jsx(o,{autoComplete:"Price-Discount",name:"PriceDiscount",fullWidth:!0,type:"number",id:"Price-Discount",label:"Price Discount",value:n.priceDiscount,onChange:s=>x("priceDiscount",s.target.value)})}),e.jsx(i,{item:!0,xs:6,sm:4,lg:4,children:e.jsx(o,{autoComplete:"country",name:"country",required:!0,fullWidth:!0,id:"country",label:"Country",value:n.country,onChange:s=>x("country",s.target.value)})}),e.jsx(i,{item:!0,xs:6,sm:4,lg:4,children:e.jsx(o,{autoComplete:"city",name:"city",required:!0,fullWidth:!0,id:"city",label:"City",value:n.city,onChange:s=>x("city",s.target.value)})}),e.jsx(i,{item:!0,xs:12,sm:4,lg:4,children:e.jsx(o,{autoComplete:"Tags",name:"Tags",required:!0,fullWidth:!0,id:"Tags",label:"Tags",multiline:!0,value:n.tags,onChange:s=>x("tags",s.target.value)})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(q,{p:".7rem",borderRadius:"3px",textAlign:"center",border:"1px solid rgba(0,0,0,0.3)",children:[e.jsx(Z,{type:"file",accept:"image/*",name:"",onChange:s=>v(s.target.files[0]),style:{display:"none"},id:"file-input"}),e.jsx("label",{htmlFor:"file-input",children:e.jsx($,{variant:"outlined",component:"span",sx:{textTransform:"capitalize"},children:"Select Cover Img"})}),h&&e.jsxs("div",{children:[e.jsx(y,{variant:"subtitle1",mt:2,textTransform:"capitalize",children:"Selected CoverImg:"}),e.jsx(ie,{sx:{pl:5},children:h.name})]})]})}),e.jsx(i,{item:!0,xs:12,sm:6,children:e.jsxs(q,{p:".7rem",borderRadius:"3px",textAlign:"center",border:"1px solid rgba(0,0,0,0.3)",children:[e.jsx("input",{type:"file",accept:"image/*",name:"",multiple:!0,onChange:s=>{const d=Array.from(s.target.files);!d.length>0||p(d)},style:{display:"none"},id:"multiple-file-input"}),e.jsx("label",{htmlFor:"multiple-file-input",children:e.jsx($,{variant:"outlined",component:"span",sx:{textTransform:"capitalize"},children:"Select Images"})}),a.length>0&&e.jsxs("div",{children:[e.jsx(y,{variant:"subtitle1",mt:2,textTransform:"capitalize",children:"Selected Images:"}),e.jsx("ul",{children:a.map(s=>e.jsx("li",{children:s.name},s.name))})]})]})})]}),e.jsxs(D,{component:"form",sx:{mt:3,mr:1,minWidth:90},size:"small",direction:"row",children:[e.jsx(y,{variant:"h6",children:"Select languege:"}),e.jsxs(J,{labelId:"demo-select-small-label",id:"demo-select-small",value:z,variant:"standard",label:"lang",disableUnderline:!0,sx:{ml:".5rem"},onChange:s=>M(s.target.value),children:[e.jsx(I,{value:"en",children:e.jsx("em",{children:"English"})}),e.jsx(I,{value:"fr",children:e.jsx("em",{children:"French"})})]})]}),e.jsx(le,{langData:n[z],lang:z,handleChange:G}),e.jsx($,{type:"submit",fullWidth:!0,variant:"contained",sx:{my:3,mb:2},children:"Upload"})]})]})},oe=K.injectEndpoints({endpoints:t=>({getAllUsers:t.query({query:()=>"api/v1/users",providesTags:["users"]}),getOneUser:t.query({query:({id:r})=>`api/v1/products/${r}`,providesTags:["users"]})})}),{useGetAllUsersQuery:ce}=oe,u=W(F)(({theme:t})=>({[`&.${f.head}`]:{backgroundColor:t.palette.common.black,color:t.palette.common.white},[`&.${f.body}`]:{fontSize:14}})),de=W(S)(({theme:t})=>({"&:nth-of-type(odd)":{backgroundColor:t.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}));function ue(){const{data:t}=ce();return e.jsx(U,{component:E,children:e.jsxs(w,{sx:{minWidth:700},"aria-label":"customized table",children:[e.jsx(B,{children:e.jsxs(S,{children:[e.jsx(u,{children:"Customer Name"}),e.jsx(u,{children:"Email"}),e.jsx(u,{children:"Role"}),e.jsx(u,{children:"action"}),e.jsx(u,{children:"ProteinÂ (g)"})]})}),e.jsx(L,{children:t&&t.doc.map(r=>e.jsxs(de,{children:[e.jsx(u,{component:"th",scope:"row",children:r.name}),e.jsx(u,{align:"left",children:r.email}),e.jsx(u,{align:"left",children:r.role}),e.jsx(u,{align:"right",children:r.carbs}),e.jsx(u,{align:"right",children:r.protein})]},r.name))})]})})}function R(){return e.jsx("div",{children:"profile"})}const g=_(F)(({theme:t})=>({[`&.${f.head}`]:{backgroundColor:t.palette.common.black,color:t.palette.common.white,textTransform:"capitalize"},[`&.${f.body}`]:{fontSize:14}})),me=_(S)(({theme:t})=>({textTransform:"capitalize","&:nth-of-type(odd)":{backgroundColor:t.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}));function he({row:t,lang:r}){const[l]=re(),h=async()=>{const v=t._id,a="active";try{await l({id:v,activeStatus:a}),window.location.reload()}catch(p){throw Error(p)}};return e.jsxs(me,{children:[e.jsx(g,{component:"th",scope:"row",children:t.name}),e.jsx(g,{children:t.brand}),e.jsx(g,{children:t[r].category}),e.jsx(g,{children:t[r].subcategory}),e.jsxs(g,{children:["$",t.price]}),e.jsxs(g,{children:[t.activeStatus,"..."]}),e.jsx(g,{children:e.jsx($,{onClick:h,children:"update"})})]},t.name)}const j=W(F)(({theme:t})=>({[`&.${f.head}`]:{backgroundColor:t.palette.common.black,color:t.palette.common.white,textTransform:"capitalize"},[`&.${f.body}`]:{fontSize:14}}));W(S)(({theme:t})=>({textTransform:"capitalize","&:nth-of-type(odd)":{backgroundColor:t.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}));function xe(){const t=A(V),{data:r}=se(t);return e.jsx(U,{component:E,children:e.jsxs(w,{sx:{minWidth:700},"aria-label":"customized table",children:[e.jsx(B,{children:e.jsxs(S,{children:[e.jsx(j,{children:"Product name"}),e.jsx(j,{children:"Brand"}),e.jsx(j,{children:"Category"}),e.jsx(j,{children:"subcategory"}),e.jsx(j,{children:"Price"}),e.jsx(j,{children:"Status"}),e.jsx(j,{children:"action"})]})}),e.jsx(L,{children:r&&r.doc.map(l=>e.jsx(he,{row:l,lang:t},l._id))})]})})}function We(){const t=A(X);return e.jsxs(D,{children:[t==="profile"&&e.jsx(R,{})," ",t==="profile"&&e.jsx(R,{}),t==="upload product"&&e.jsx(ne,{}),t==="customers"&&e.jsx(ue,{}),t==="products"&&e.jsx(xe,{})]})}export{We as default};
